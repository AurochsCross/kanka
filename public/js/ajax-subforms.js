(()=>{var t;function n(){var n=$(".ajax-subform");0!==n.length&&(n.off("submit"),n.on("submit",(function(n){if($(this).attr("is-valid"))return!0;window.entityFormHasUnsavedChanges=!1,n.preventDefault(),(t=$(this)).find(".submit-group").hide(),t.find(".submit-animation").show(),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var a=new FormData(this);$.ajax({url:$(this).attr("action"),method:$(this).attr("method"),data:a,cache:!1,contentType:!1,processData:!1,async:!1}).done((function(n){t.attr("is-valid",!0),t.off("submit"),t.submit()})).fail((function(n){if(t.find(".input-error").removeClass("input-error"),t.find(".text-danger").remove(),503===n.status)return window.showToast(n.responseJSON.message,"toast-error"),void e(t);403===n.status&&($("#entity-form-403-error").show(),e(t));var a=n.responseJSON.errors,o=Object.keys(a);o.forEach((function(n){$('[name="'+n+'"]').length>0?t.find('[name="'+n+'"]').addClass("input-error").parent().append('<div class="text-danger">'+a[n][0]+"</div>"):!1}));var s=Object.keys(a)[0],i=t.find('[name="'+s+'"]');i.length>0&&i.focus(),e(t)}))})))}function e(t){t.find(".submit-group").show(),t.find(".submit-animation").hide()}$(document).ready((function(){n(),$(document).on("shown.bs.modal shown.bs.popover",(function(){n()}))}))})();