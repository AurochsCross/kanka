(()=>{var e,n,i,o,a,t,s,d,r,c=!1;function l(){var e=t.val(),n=t.data("url");a.prop("disabled",!0).find(".check").hide().parent().find(".spinner").show(),e||o.removeClass("disabled").prop("disabled",!1),$.ajax({url:n+"?coupon="+e,context:this}).done((function(e){if(a.prop("disabled",!1).find(".check").show().parent().find(".spinner").hide(),o.removeClass("disabled").prop("disabled",!1),!e.valid)return s.hide(),d.show(),void r.val("");d.hide(),s.html(e.discount).show(),r.val(e.coupon)}))}$(document).ready((function(){var u;u=$("#stripe-token"),e=Stripe(u.val()),n=e.elements(),$('input[name="period"]').change((function(){var e=$("#pricing-overview");console.log("checked?",this.checked),this.checked?e.removeClass("period-month").addClass("period-year"):e.removeClass("period-year").addClass("period-month")})),$("#subscribe-confirm").on("shown.bs.modal",(function(){!function(){if(o=$(".subscription-confirm-button"),1===$("#card-element").length){if(!i){var u={base:{color:"#555555",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"14px","::placeholder":{color:"#777777"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}};i=n.create("card",{hidePostalCode:!0,style:u})}i.mount("#card-element")}$("#subscription-confirm").submit((function(n){if(c)return!0;n.preventDefault(),o.addClass("disabled"),o.find("span").hide(),o.find(".spinner").show();var a=$('input[name="subscription-intent-token"]'),t=$(".alert-danger");t.hide();var s=$('input[name="payment_id"]');if(s.val())return c=!0,$("#subscription-confirm").submit(),!1;e.confirmCardSetup(a.val(),{payment_method:{card:i,billing_details:{name:$('input[name="card-holder-name"]').val()}}}).then(function(e){if(e.error)return o.removeClass("disabled").text(o.data("text")),t.text(e.error.message).show(),!1;s.val(e.setupIntent.payment_method),c=!0,$("#subscription-confirm").submit()}.bind(this))})),$(".subscription-form").submit((function(e){return o.addClass("disabled").find("span").hide().parent().find(".spinner").show(),!0})),a=$("#coupon-check-btn"),t=$("#coupon-check"),s=$("#coupon-success"),d=$("#coupon-invalid"),r=$("#coupon"),a.click((function(e){l()})),t.change((function(){l()})),t.focus((function(){o.addClass("disabled").prop("disabled",!0)})),t.focusout((function(){t.val()||o.removeClass("disabled").prop("disabled",!1)}))}(),$(".select-reveal-field").change((function(e){var n=$(this).data("change-target");"custom"===this.value?$(n).show():$(n).hide()}))}))}))})();