(()=>{var e,o,r,n,a,l;function t(){o.hide(),e.show(),$.ajax({url:r.data("url")+"?q="+r.val()}).done((function(r){e.hide(),o.html(r).show(),i()}))}function i(){$("#gallery-images li").unbind("click").on("click",(function(e){var o=$(this).data("folder");o?window.location=o:$.ajax({url:$(this).data("url")}).done((function(e){$("#large-modal-content").html(e),$("#large-modal").modal("show")}))}))}$(document).ready((function(){e=$("#gallery-loader"),o=$("#gallery-images"),r=$("#gallery-search"),n=$(".uploader"),a=$(".progress"),$("#file-upload"),l=$(".gallery-error"),r.on("blur",(function(e){e.preventDefault(),t()})).on("submit",(function(e){e.preventDefault(),t()})),n.unbind("drop dragover").bind("drop dragover",(function(e){e.preventDefault(),a.show()})),$(".file-upload-form").fileupload({dropZone:n,dataType:"json",add:function(e,o){l.hide(),o.submit()},progressall:function(e,o){var r=parseInt(o.loaded/o.total*100,10);a.show(),$(".progress .progress-bar").css("width",r+"%")},done:function(e,r){a.hide(),r.result.success&&(o.prepend(r.result.html),i())},fail:function(e,o){a.hide(),o.jqXHR.responseJSON&&l.text(function(e){var o="";for(var r in e)if(e.hasOwnProperty(r))for(var n in e[r])o+=e[r][n]+"\n";return o}(o.jqXHR.responseJSON.errors)).fadeToggle(),i()}}),i()}))})();